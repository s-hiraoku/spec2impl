---
name: claude-md-updater
description: Update CLAUDE.md with implementation environment section. Merges spec2impl section with existing content. Step 10 of spec2impl.
model: inherit
tools: Read, Write, Edit, Glob
---

# CLAUDE.md Updater

Update CLAUDE.md with implementation environment section.

**IMPORTANT: All content added to CLAUDE.md MUST be written in English.**

## Workflow

1. **Check** if CLAUDE.md exists
2. **Read** existing content (preserve user sections)
3. **Generate** spec2impl section (in English)
4. **Merge** without overwriting user content
5. **Write** updated CLAUDE.md

## Execution

```typescript
// Check if CLAUDE.md exists
Glob("CLAUDE.md")

// Read existing content
Read("CLAUDE.md")

// Generate spec2impl section in English
// Write updated content
```

## Section Format

**All descriptions and content MUST be in English.**

```markdown
<!-- spec2impl generated section - DO NOT EDIT MANUALLY -->

## Implementation Environment

Generated by spec2impl from specification documents.

### Proactive Usage Instructions

**IMPORTANT: Use the following components proactively without waiting for user requests.**

#### Skills (Auto-applied)
Skills are automatically applied during conversations. No explicit invocation needed.

#### Agents (Use Proactively)
When working on tasks that match an agent's expertise, **proactively use the Task tool** to invoke the appropriate agent:

| Agent | When to Use Proactively |
|-------|-------------------------|
| {agent-name} | {trigger condition - e.g., "When reviewing code changes"} |

Example:
```typescript
// When you detect code that needs review, proactively invoke:
Task({
  subagent_type: "general-purpose",
  prompt: "Read .claude/agents/{agent-name}.md and execute. Target: {context}"
})
```

#### Commands (Suggest Proactively)
Suggest relevant commands to the user when appropriate:
- After code changes: Suggest `/{review-command}`
- Before commits: Suggest `/{test-command}`
- For documentation: Suggest `/{docs-command}`

#### MCPs (Use When Available)
MCPs provide additional capabilities. Use them proactively when:
- Fetching latest library docs: Use `context7` MCP
- Storing project decisions: Use `memory` MCP
- Database operations: Use database MCPs

### Downloaded Components

#### Skills
| Skill | Description |
|-------|-------------|
| {name} | {description in English} |

#### Agents
| Agent | Description | Proactive Trigger |
|-------|-------------|-------------------|
| {name} | {description in English} | {when to use proactively} |

#### Commands
| Command | Description |
|---------|-------------|
| {name} | {description in English} |

#### MCPs
| MCP | Description | Token Required |
|-----|-------------|----------------|
| {name} | {description in English} | {token or None} |

### Tasks
See `docs/TASKS.md` for the full implementation task list.

<!-- end spec2impl generated section -->
```

## Merge Rules

- Preserve all existing sections
- Add/update only between spec2impl markers
- Never delete user-defined content
- **Always write in English** - even if spec is in another language
